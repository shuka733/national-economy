# ナショナルエコノミー プロジェクト情報

## 開発チームの役割分担

| メンバー | 担当 | ブランチ |
|---|---|---|
| 加藤（ユーザー本人） | ゲームロジック全般・カード画像作成 | `develop_kato` |
| そら | UI・デザイン | `develop_sora` |

### ブランチ運用ルール
- `main`: 完成・動作確認済みのコードのみ置く
- 各自のブランチで開発し、完成したら `main` にPR（プルリクエスト）でマージ
- **加藤が作業するときは必ず `develop_kato` ブランチにいること**

---

# ナショナルエコノミー実装統合プロンプト for Claude Code

## 目的
別の作業者が実装した高機能版プロジェクト（以下「kato版」）の成果物を、現在のプロジェクト（以下「現行版」）に統合してください。
kato版には **UIの全面刷新**、**CPU対戦機能**、**新ゲームモード「Glory」** が実装されています。

## プロジェクトパス
- **kato版（ソース）**: `C:\Users\k2000\.gemini\antigravity\scratch\kato_national-economy\kato_national-economy\national-economy`
- **現行版（ターゲット）**: `C:\Users\k2000\.gemini\antigravity\scratch\national-economy`
※ あなたはターゲットプロジェクトのルートで作業を行ってください。

## 統合要件とルール

### 1. UIの全面刷新（kato版を採用）
UIに関しては、現行版の実装を捨て、kato版の実装を全面的に採用してください。
- `src/Board.tsx` をkato版のもので上書きしてください。
- `src/components/` ディレクトリ（kato版のみ存在）をまるごとコピーしてください。
- `src/Icons.tsx` やその他のUIコンポーネントも忘れずコピーしてください。
- `src/index.css` もkato版のデザインを反映させてください。
- 画像や音声ファイル等のアセットがあればそれらもコピーしてください。

### 2. 新機能「CPU対戦」の追加
kato版で実装されているCPU対戦機能を移植してください。
- `src/bots.ts` をコピーし、関連する依存関係を解決してください。
- ゲーム設定画面（`App.tsx`等）でCPUあり/なしを選択できるようにしてください。

### 3. 新ゲームモード「Glory」の実装
kato版には基本セット（Basic）に加え、拡張セット「Glory」モードが追加されています。
**【超重要】既存のBasicモードのロジックは絶対に変更しないでください。**
従来の挙動を100%維持した上で、設定でGloryモードが選ばれた場合のみ新ロジックが動くように実装してください。

- **ファイル追加**:
  - `src/glory_cards.ts`（カード定義）
  - その他Glory関連ファイル（`debug_glory.ts`等はデバッグ用なら不要だが、必要ならリネームして取り込み）
- **ロジック拡張 (`src/game.ts`)**:
  - `GameVersion` 型（'basic' | 'glory'）を定義し、ゲームステートで管理できるようにしてください。
  - `setup` 関数でバージョンを受け取り、デッキ構築 (`buildDeck`) を分岐させてください。
  - VPトークン、可変コストなどGlory固有の処理は `if (version === 'glory')` 等で分岐し、Basicモードに影響を与えないようにしてください。

### 4. アプリケーションのエントリーポイント (`App.tsx`)
`App.tsx` もkato版をベースに統合してください。ただし、現行版には **P2Pオンライン対戦機能** がありますが、kato版には無い可能性があります。
- **UI/メニュー画面**: kato版のデザインを採用
- **機能**: 現行版の「P2Pオンライン対戦」と、kato版の「CPU対戦」「Gloryモード」の両方が使えるようにうまくマージしてください。
  - 難しければ、まずはkato版の`App.tsx`をベースにしつつ、PeerJS関連のコード（現行版`App.tsx`参照）を移植してください。

## 作業手順の提案
1. kato版から新規ファイル群（`components/`, `bots.ts`, `glory_cards.ts`等）をコピー
2. `game.ts` の統合（Basicロジック維持 + Gloryロジック追加）
3. `Board.tsx` と `index.css` の更新（UI刷新）
4. `App.tsx` の統合（新UI + CPU設定 + P2P機能の維持）
5. ビルドと動作確認（Basicモード、Gloryモード両方）

## 注意事項
- **破壊的変更の禁止**: 既存の `national-economy` のBasicモードのバランスや挙動が変わらないことを最優先してください。
- **依存パッケージ**: kato版の `package.json` を確認し、必要なライブラリ（もしあれば）を追加してください。

このプロンプトに従い、慎重にマージ作業を行ってください。
